# CST8503 Planning Presentation  
Solving planning problems with Knowledge Representation and Prolog  


## Navigation

Overview  
Prolog  
Monkey Case  


## Overview  
speaker Jiaxing Yi  

Page title  
Overview of Knowledge Representation and Planning  


Team  

Jiaxing Yi  
Peng Wang  
Hye Ran Yoo  


Presentation context  

Course  
  CST8503 Knowledge Representation and Planning  

Topic  
  How to solve planning problems using  
  Knowledge Representation KR  
  Prolog planning  

Audience  

  Students who already did CST8503 labs and assignments  
  Students who want one clear big picture of planning with Prolog  


Goals of this presentation  

After this talk, the audience should  

  know what Knowledge Representation means in this course  
  know what a planning problem is in AI  
  have a simple picture of how Prolog can search for a plan  
  see one complete example Monkey and Bananas  
  take away a few practical study tips  


Why this is useful  

Planning can feel abstract when we only look at code.  
By following one full example, it becomes easier to connect  

  the story level  
  the logical model  
  the Prolog rules and the final plan.  


What is Knowledge Representation  

Basic idea  

  Knowledge Representation is a way to describe facts about the world  
  so that a computer can reason logically about them.  

We use  

  objects  
    monkey, box, bananas, locations l1, l2, l3  

  relations and properties  
    at  where something is  
    has  what the monkey holds  
    on_box  whether the monkey is on the box  

  states  
    snapshots of what is true now  
    described by fluents facts that can change over time.  

Good Knowledge Representation makes it clear  

  what is true in the current state  
  which actions are allowed  
  what the world looks like after an action.  


What is a planning problem  

Planning problem in AI  

  given an initial state  
  given a goal condition  
  find a sequence of actions that leads from start to goal.  

Examples  

  a robot moving through rooms  
  Blocks World  
  Monkey and Bananas  

Key elements  

  state  
  actions with preconditions and effects  
  transitions between states  
  plan as a sequence of actions.  


KR approach versus Machine Learning  

Knowledge Representation based approach  

  uses explicit facts and logical rules  
  works well when the world is small and rules are clear  
  gives explainable plans.  

Machine Learning approach  

  uses data and statistics  
  works well when rules are unknown or very complex.  

In CST8503 the planning tasks are small, clear worlds,  
so Knowledge Representation plus Prolog is a natural choice.  


Closing message from Overview  

Main point  

  Planning with Prolog is a structured process,  
  not random trial and error.  

The presentation will  

  introduce Knowledge Representation and planning ideas  
  show the Prolog structure  
  walk through Monkey and Bananas as a template  
  finish with tips based on real experience.  



## Prolog  
speaker Peng Wang  

Page title  
Prolog planning structure and workflow  


Big picture  

In Prolog the planning system is built from  

  state representation  
  action representation  
  preconditions  
  effects  

and a planner predicate that uses all of them together.  


State representation  

A state is represented with a situation variable S  
and fluents that describe what is true in S.  

Typical fluents  

  monkey is at some location  
  box is at some location  
  monkey has or does not have bananas  
  monkey is or is not on the box  

Initial state  

  a special situation, often called s0  
  lists what is true at the beginning.  

Goal condition  

  a fluent or a set of fluents that must be true in a final state  
  for Monkey and Bananas  monkey has bananas.  


Actions as Prolog terms  

Each action is written as a Prolog term.  

Example actions  

  go L            monkey walks to location L  
  push box L      monkey pushes the box to L  
  climb           monkey climbs onto the box  
  grasp           monkey grabs the bananas  

For each action we later define  

  when it is allowed  preconditions  
  how it changes the state  effects.  


Key planning predicates  

Precondition rule  

  says when an action is allowed in a state  
  poss Action, S  

Effect rule  

  says how an action changes one state into another  
  result Action, S1, S2  

Planner rule  

  says which list of actions is a plan from a state to a goal  
  plan S, G, Plan  


How Prolog searches for a plan  

Prolog uses depth first search with backtracking.  

Planner idea in words  

  if the goal is already true in the current state  
    the plan is empty  

  otherwise  
    choose an action that is possible in this state  
    compute the next state using the effect rule  
    continue planning from that next state  

If this attempt fails, Prolog backtracks  
and tries another action or another sequence.  

We define  

  when actions are possible  
  how they change the world  
  when the goal is satisfied  

and Prolog explores the possible sequences of actions.  


Modelling steps checklist  

Workflow for building a new planning problem  

  Step 1  write the story in plain language  
  Step 2  list objects and locations  
  Step 3  define important fluents  
  Step 4  define actions  
  Step 5  write preconditions for each action  
  Step 6  write effects for each action  
  Step 7  define the initial state and the goal  
  Step 8  implement the planner and run small test queries  



## Monkey Case  
speaker Hye Ran Yoo  

Page title  
Monkey and Bananas case study, tips, and conclusion  


Story of the problem  

World  

  one room with three locations l1, l2, l3.  

Initial setup  

  monkey at l1  
  box at l2  
  bananas hanging at l3.  

Monkey actions  

  go L          move to location L  
  push box L    push the box and move with it  
  climb         climb onto the box  
  grasp         grab the bananas.  

Goal  

  at the end, the monkey has the bananas.  


Planning elements summary  

Initial state  

  monkey at l1  
  box at l2  
  bananas at l3  
  monkey does not have bananas  
  monkey is not on the box.  

Goal  

  monkey has bananas.  

Typical high level plan  

  go to the box  
  push the box under the bananas  
  climb onto the box  
  grasp the bananas.  


Preconditions and effects in words  

go  

  preconditions  

    monkey is at some location Here  
    target location is different from Here  
    monkey is not on the box  

  effect  

    monkeyâ€™s location becomes the target location.  


push box  

  preconditions  

    monkey and box at the same location  
    target location is different from the current one  

  effects  

    monkey location becomes target  
    box location becomes target.  


climb  

  precondition  

    monkey and box at the same location  

  effect  

    monkey is now on the box.  


grasp  

  preconditions  

    monkey is on the box  
    monkey and bananas at the same location  

  effect  

    monkey has bananas and the goal is reached.  


Plan as a short story  

Step 1  start  

  monkey at l1, box at l2, bananas at l3.  

Step 2  go to l2  

  monkey walks from l1 to l2.  

Step 3  push box to l3  

  monkey pushes the box from l2 to l3  
  now monkey, box, and bananas are all at l3.  

Step 4  climb  

  monkey climbs onto the box at l3.  

Step 5  grasp  

  monkey grabs the bananas  
  the goal condition is satisfied.  


Team reflection and tips  

What was difficult  

  thinking in terms of states and fluents  
  remembering all preconditions  
  understanding why sometimes the planner found no plan.  

How it improved  

  drawing small diagrams of each step  
  testing single actions with simple queries  
  explaining the story in natural language before changing rules.  

Tips for other students  

  start with a very small version of the problem  
  write objects, locations, and fluents on paper  
  make a mini list of preconditions and effects for each action  
  if there is no plan, first check the initial state and the goal  
  use clear names so the code is easy to read later.  



## References

Russell, Stuart, and Peter Norvig. Artificial Intelligence  A Modern Approach. Pearson.  

Ghallab, Malik, Dana Nau, and Paolo Traverso. Automated Planning  Theory and Practice. Elsevier.  

Course materials and assignment handout for CST8503 Knowledge Representation and Planning, Algonquin College.  
